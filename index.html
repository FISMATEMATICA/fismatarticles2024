<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Publications 2024</title>

  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      margin: 0;
      background-color: #f7f9fc;
      color: #333;
    }

    header {
      background-color: #004d4d;
      padding: 2em;
      text-align: center;
    }

    header h1 {
      color: #ffffff;
      font-size: 2.5em;
      margin: 0;
    }

    #results {
      max-width: 900px;
      margin: 2em auto;
      padding: 0 1em;
    }

    .paper {
      margin-bottom: 1.5em;
      padding: 1.2em;
      background: #ffffff;
      border-left: 6px solid #004d4d;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      transition: transform 0.2s ease;
    }

    .paper:hover {
      transform: translateY(-2px);
    }

    .title a {
      font-size: 1.2em;
      font-weight: bold;
      color: #004d4d;
      text-decoration: none;
    }

    .title a:hover {
      text-decoration: underline;
    }

    .meta {
      margin-top: 0.5em;
      color: #555;
      font-size: 0.95em;
    }
  </style>
</head>

<body>
  <header>
    <h1>Publications 2024</h1>
  </header>

  <div id="results">Carregando...</div>

  <script>
    const workerURL = "https://spring-glade-d911.fismat.workers.dev/?url=";

    const nomesDestacados = [
      "Gustavo Burdman", "Renata Zukanovich Funchal", "Oscar Eboli", "O. J. P. Eboli",
      "Gustavo F. S. Alves", "Matheus Martines", "Luighi P. S. Leal", "L.P. Santos Leal",
      "L. P. Santos Leal", "L. P. S. Leal", "Peter Reimitz", "Ana Luisa Foguel",
      "Gabriel M. Salla", "Oscar J. P. Ã‰boli", "Lucas Magno D. Ramos",
      "Gustavo S.S. Sakoda", "G.S.S. Sakoda", "Disha Bhatia", "Sujay Shil",
      "Rafiqul Rahaman", "Barbara Amaral", "Eduardo Casali", "Elisa G.M. Ferreira",
      "Frederique Grassi", "J.C.A. Barata", "JoÃ£o C. A. Barata", "Joao C. A. Barata",
      "L.R.W.Abramo", "L. Raul Abramo", "R. Abramo", "Raul Abramo", "NatÃ¡lia V.N. Rodrigues",
      "Marcos Lima", "Matthew Luzum", "Luis Raul Abramo", "JoÃ£o Vitor Dinarte Ferri",
      "Igor Neiva Mesquita", "Ãlvaro S. de Jesus", "Ã.S. de Jesus", "Naim Elias Comar",
      "Alisson Tezzin", "Ian Tashiro", "Kevin Pala", "Pedro Ishida", "Luis F. Santos",
      "LuÃ­s F. Santos", "L. R. Abramo", "O. J. P. Ã‰boli", "R. Zukanovich Funchal", "Pedro Bittar", "Rafael Grossi", 
      "BÃ¡rbara Amaral", "Barbara Amaral"
    ];

    // NormalizaÃ§Ã£o para comparar nomes sem erros (acentos, maiÃºsculas/minÃºsculas, espaÃ§os)
    function norm(text) {
      return (text || "")
        .normalize("NFD")
        .replace(/[\u0300-\u036f]/g, "")
        .replace(/\s+/g, " ")
        .trim()
        .toLowerCase();
    }

    function deveDestacarAutor(nomeAutor) {
      const n = norm(nomeAutor);
      return nomesDestacados.some(autor => norm(autor) === n);
    }

    async function carregarResultados() {
      const autores = nomesDestacados
        .map(nome => `au:"${nome.replace(/ /g, "+")}"`)
        .join("+OR+");

      const arxivURL =
        `https://export.arxiv.org/api/query?search_query=${autores}&sortBy=submittedDate&sortOrder=descending&max_results=200`;

      try {
        const response = await fetch(workerURL + encodeURIComponent(arxivURL));
        const xmlText = await response.text();
        const parser = new DOMParser();
        const xml = parser.parseFromString(xmlText, "application/xml");

        const entries = Array.from(xml.querySelectorAll("entry"));
        const vistos = new Set();
        let papers = [];

        entries.forEach(entry => {
          const id = entry.querySelector("id")?.textContent;
          if (!id || vistos.has(id)) return;
          vistos.add(id);

          const published = entry.querySelector("published")?.textContent.slice(0, 10) || "";
          if (!published.startsWith("2024")) return;

          const title = entry.querySelector("title")?.textContent.trim() || "Sem tÃ­tulo";
          const link = id;

          const authors = Array.from(entry.querySelectorAll("author > name"))
            .map(a => a.textContent.trim());

          const destacados = authors.filter(a => deveDestacarAutor(a));

          // ðŸ”¥ CorreÃ§Ã£o principal: pular artigos sem autores da lista
          if (destacados.length === 0) return;

          const outros = authors.filter(a => !deveDestacarAutor(a));
          const ordenados = [...destacados, ...outros];

          const exibidos = ordenados.length > 8
            ? [...ordenados.slice(0, 8), "et al."]
            : ordenados;

          const authorsHTML = exibidos
            .map(a => deveDestacarAutor(a) ? `<strong>${a}</strong>` : a)
            .join(", ");

          const journalRef = entry.querySelector("arxiv\\:journal_ref, journal_ref");
          const journal = journalRef ? journalRef.textContent.trim() : "";

          papers.push({
            published,
            html: `
              <div class="paper">
                <div class="title"><a href="${link}" target="_blank">${title}</a></div>
                <div class="meta">Autores: ${authorsHTML}</div>
                <div class="meta">Publicado em: ${published}</div>
                ${journal ? `<div class="meta">${journal}</div>` : ""}
              </div>
            `
          });
        });

        papers.sort((a, b) => b.published.localeCompare(a.published));

        document.getElementById("results").innerHTML =
          papers.map(p => p.html).join("") ||
          "Nenhum artigo de 2024 encontrado.";

      } catch (error) {
        document.getElementById("results").innerHTML =
          "Erro ao carregar os dados: " + error.message;
      }
    }

    carregarResultados();
  </script>
</body>
</html>

