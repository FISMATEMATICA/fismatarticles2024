<!DOCTYPE html>
<html lang="pt-BR">
<head>
Â  <meta charset="utf-8" />
Â  <meta name="viewport" content="width=device-width,initial-scale=1" />
Â  <title>Publications 2024</title>

Â  <style>
Â  Â  /* O CSS original de 2024 foi ligeiramente adaptado para a sintaxe otimizada do 2025,
Â  Â  Â  Â  mantendo a mesma estÃ©tica visual. */
Â  Â  body { font-family: "Segoe UI", Arial, sans-serif; margin:0; background:#f7f9fc; color:#333; }
Â  Â  header { background:#004d4d; padding:2em; text-align:center; }
Â  Â  header h1 { color:#fff; font-size:2.5em; margin:0; }
Â  Â  #results { max-width:900px; margin:2em auto; padding:0 1em; }
Â  Â  .paper { margin-bottom:1.5em; padding:1.2em; background:#fff; border-left:6px solid #004d4d;
Â  Â  Â  Â  Â  Â  Â border-radius:8px; box-shadow:0 4px 10px rgba(0,0,0,0.05); transition:transform .2s ease; }
Â  Â  .paper:hover{ transform:translateY(-2px); }
Â  Â  .title a{ font-size:1.2em; font-weight:bold; color:#004d4d; text-decoration:none; }
Â  Â  .meta{ margin-top:.5em; color:#555; font-size:.95em; }
Â  Â  .loading{ text-align:center; padding:2em 0; color:#666; }
Â  </style>
</head>
<body>
Â  <header><h1>Publications 2024</h1></header>
Â  <div id="results" class="loading">Carregando artigos...</div>

Â  <script>
Â  Â  // URL do seu Worker
Â  Â  const WORKER_BASE = "https://spring-glade-d911.fismat.workers.dev/";
Â  Â  const resultsDiv = document.getElementById("results");
Â  Â  const TARGET_YEAR = "2024";

Â  Â  // Lista original de autores de 2024 (Preservada)
Â  Â  const nomesDestacados = [
Â  Â  Â  "Gustavo Burdman", "Renata Zukanovich Funchal", "Oscar Eboli", "O. J. P. Eboli",
Â  Â  Â  "Gustavo F. S. Alves", "Matheus Martines", "Luighi P. S. Leal", "L.P. Santos Leal",
Â  Â  Â  "L. P. Santos Leal", "L. P. S. Leal", "Peter Reimitz", "Ana Luisa Foguel",
Â  Â  Â  "Gabriel M. Salla", "Oscar J. P. Ã‰boli", "Lucas Magno D. Ramos",
Â  Â  Â  "Gustavo S.S. Sakoda", "G.S.S. Sakoda", "Disha Bhatia", "Sujay Shil",
Â  Â  Â  "Rafiqul Rahaman", "Barbara Amaral", "Eduardo Casali", "Elisa G.M. Ferreira",
Â  Â  Â  "Frederique Grassi", "J.C.A. Barata", "JoÃ£o C. A. Barata", "Joao C. A. Barata",
Â  Â  Â  "L.R.W.Abramo", "L. Raul Abramo", "R. Abramo", "Raul Abramo", "NatÃ¡lia V.N. Rodrigues",
Â  Â  Â  "Marcos Lima", "Matthew Luzum", "Luis Raul Abramo", "JoÃ£o Vitor Dinarte Ferri",
Â  Â  Â  "Igor Neiva Mesquita", "Ãlvaro S. de Jesus", "Ã.S. de Jesus", "Naim Elias Comar",
Â  Â  Â  "Alisson Tezzin", "Ian Tashiro", "Kevin Pala", "Pedro Ishida", "Luis F. Santos",
Â  Â  Â  "LuÃ­s F. Santos", "L. R. Abramo", "O. J. P. Ã‰boli", "BÃ¡rbara Amaral",
Â  Â  Â  "R. Zukanovich Funchal", "Pedro Bittar", "Rafael Grossi"
Â  Â  ];


Â  Â  // --- FunÃ§Ãµes Auxiliares (Estrutura 2025) ---

Â  Â  function deveDestacarAutor(nome) {
Â  Â  Â  const n = nome.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase().trim();
Â  Â  Â  return nomesDestacados.some(a => 
Â  Â  Â  Â  a.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase().trim() === n
Â  Â  Â  );
Â  Â  }

Â  Â  function escapeHtml(text) {
Â  Â  Â  if (!text) return "";
Â  Â  Â  return text.replace(/&/g, "&amp;")
Â  Â  Â  Â  Â  Â  Â  Â  Â .replace(/</g, "&lt;")
Â  Â  Â  Â  Â  Â  Â  Â  Â .replace(/>/g, "&gt;")
Â  Â  Â  Â  Â  Â  Â  Â  Â .replace(/"/g, "&quot;")
Â  Â  Â  Â  Â  Â  Â  Â  Â .replace(/'/g, "&#039;");
Â  Â  }

Â  Â  // Transforma XML (entry nodes) em objeto JS
Â  Â  function parseEntry(node) {
Â  Â  Â  const getText = (tag) => {
Â  Â  Â  Â  const el = node.getElementsByTagName(tag)[0];
Â  Â  Â  Â  return el ? el.textContent.trim() : "";
Â  Â  Â  };

Â  Â  Â  const id = getText("id");
Â  Â  Â  const title = getText("title");
Â  Â  Â  const published = getText("published").slice(0, 10);
Â  Â  Â  const updated = getText("updated").slice(0, 10); // Inclui 'updated' para filtro robusto
Â  Â  Â  const journal_ref_node = node.getElementsByTagName("journal_ref")[0];
Â  Â  Â  const journal = journal_ref_node ? journal_ref_node.textContent.trim() : "";

Â  Â  Â  const authorNodes = node.getElementsByTagName("author");
Â  Â  Â  const authors = [];
Â  Â  Â  for (let a of authorNodes) {
Â  Â  Â  Â  const nameNode = a.getElementsByTagName("name")[0];
Â  Â  Â  Â  if (nameNode) authors.push(nameNode.textContent.trim());
Â  Â  Â  }

Â  Â  Â  return { id, title, published, updated, authors, journal };
Â  Â  }

Â  Â  // Remove entradas duplicadas por id
Â  Â  function dedupe(entries) {
Â  Â  Â  const seen = new Set();
Â  Â  Â  const out = [];
Â  Â  Â  for (const e of entries) {
Â  Â  Â  Â  if (!e.id) continue;
Â  Â  Â  Â  if (!seen.has(e.id)) { seen.add(e.id); out.push(e); }
Â  Â  Â  }
Â  Â  Â  return out;
Â  Â  }

Â  Â  // --- FunÃ§Ã£o Principal ---

Â  Â  async function carregarResultados() {
Â  Â  Â  resultsDiv.className = "loading";
Â  Â  Â  resultsDiv.textContent = "Carregando artigos...";

Â  Â  Â  try {
Â  Â  Â  Â  // Monta a query do arXiv usando a lista de autores
Â  Â  Â  Â  const autoresQuery = nomesDestacados
Â  Â  Â  Â  Â  .map(nome => `au:"${nome.replace(/"/g, "").replace(/\s+/g, "+")}"`)
Â  Â  Â  Â  Â  .join("+OR+");

Â  Â  Â  Â  // Aumenta o limite para 500 para garantir que todos os artigos de 2024 sejam puxados
Â  Â  Â  Â  const arxivURL = `https://export.arxiv.org/api/query?search_query=${autoresQuery}&sortBy=submittedDate&sortOrder=descending&max_results=500`;

Â  Â  Â  Â  // Chama seu Worker
Â  Â  Â  Â  const proxyURL = WORKER_BASE + "?url=" + encodeURIComponent(arxivURL);

Â  Â  Â  Â  const resp = await fetch(proxyURL, { method: "GET" });
Â  Â  Â  Â  if (!resp.ok) throw new Error("Resposta do Worker: " + resp.status + " " + resp.statusText);

Â  Â  Â  Â  const xmlText = await resp.text();

Â  Â  Â  Â  // Parse XML
Â  Â  Â  Â  const xml = new DOMParser().parseFromString(xmlText, "application/xml");
Â  Â  Â  Â  const entriesNodes = Array.from(xml.getElementsByTagName("entry"));

Â  Â  Â  Â  // Converte para objetos JS
Â  Â  Â  Â  let entries = entriesNodes.map(parseEntry);

Â  Â  Â  Â  // Desduplica por id
Â  Â  Â  Â  entries = dedupe(entries);

Â  Â  Â  Â  // ðŸŽ¯ Filtro Robusto (Publicado OU Atualizado em 2024)
Â  Â  Â  Â  entries = entries.filter(e => 
Â  Â  Â  Â  Â  (e.published && e.published.startsWith(TARGET_YEAR)) ||
Â  Â  Â  Â  Â  (e.updated && e.updated.startsWith(TARGET_YEAR))
Â  Â  Â  Â  );
Â  Â  Â  Â  
Â  Â  Â  Â  // Filtra para incluir apenas se houver ao menos um autor destacado
Â  Â  Â  Â  entries = entries.filter(e => e.authors.some(a => deveDestacarAutor(a)));

Â  Â  Â  Â  // Adiciona campo Date (objeto) para ordenar
Â  Â  Â  Â  entries = entries.map(e => ({ 
Â  Â  Â  Â  Â  ...e, 
Â  Â  Â  Â  Â  // Usa a data mais recente para ordenaÃ§Ã£o (updated > published)
Â  Â  Â  Â  Â  _date: new Date(e.updated || e.published) 
Â  Â  Â  Â  }));

Â  Â  Â  Â  // Ordena do mais recente para o mais antigo
Â  Â  Â  Â  entries.sort((a, b) => b._date - a._date);

Â  Â  Â  Â  if (!entries.length) {
Â  Â  Â  Â  Â  resultsDiv.className = "";
Â  Â  Â  Â  Â  resultsDiv.innerHTML = '<div class="muted">Nenhum artigo de 2024 encontrado.</div>';
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  // Monta HTML
Â  Â  Â  Â  const html = entries.map(e => {
Â  Â  Â  Â  Â  const authorsHTML = e.authors
Â  Â  Â  Â  Â  Â  // Limita autores exibidos (Exemplo: 8 autores + et al.)
Â  Â  Â  Â  Â  Â  .slice(0, 8) 
Â  Â  Â  Â  Â  Â  .map(a => deveDestacarAutor(a) ? `<strong>${a}</strong>` : escapeHtml(a))
Â  Â  Â  Â  Â  Â  .join(", ");
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  const etAl = e.authors.length > 8 ? ", et al." : "";

Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  <div class="paper">
Â  Â  Â  Â  Â  Â  Â  <div class="title"><a href="${e.id}" target="_blank" rel="noopener noreferrer">${escapeHtml(e.title)}</a></div>
Â  Â  Â  Â  Â  Â  Â  <div class="meta">Autores: ${authorsHTML}${etAl}</div>
Â  Â  Â  Â  Â  Â  Â  <div class="meta">Publicado em: ${e.published}</div>
Â  Â  Â  Â  Â  Â  Â  <div class="meta">Ãšltima atualizaÃ§Ã£o: ${e.updated}</div>
Â  Â  Â  Â  Â  Â  Â  ${e.journal ? `<div class="meta">${escapeHtml(e.journal)}</div>` : ""}
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }).join("");

Â  Â  Â  Â  resultsDiv.className = "";
Â  Â  Â  Â  resultsDiv.innerHTML = html;

Â  Â  Â  } catch (error) {
Â  Â  Â  Â  console.error("Erro na carga de dados:", error);
Â  Â  Â  Â  resultsDiv.className = "";
Â  Â  Â  Â  resultsDiv.innerHTML = `<div class="muted">Erro ao carregar os dados: ${escapeHtml(error.message)}</div>`;
Â  Â  Â  }
Â  Â  }

Â  Â  // inicia a carga
Â  Â  carregarResultados();
Â  </script>
</body>
</html>
